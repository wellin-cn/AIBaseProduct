# 服务端功能PRD创建指南

作为AI助手，请帮助用户为服务端功能创建一个全面的产品需求文档。这个PRD将专注于后端API、数据库、业务逻辑等服务端相关的需求。

## 服务端PRD结构模板

请使用以下结构创建服务端PRD，确保每个部分都详细且清晰：

---

# 服务端功能：[功能名称]

## 1. 功能概述
- **功能描述**：[用1-2句话简洁描述服务端功能的核心价值]
- **服务对象**：[明确此功能服务的客户端或用户群体]
- **业务价值**：[说明此功能对业务的价值和意义]

## 2. 需求背景
- **业务背景**：[详细描述为什么需要这个服务端功能]
- **现有痛点**：[列出当前系统在后端处理上的问题]
- **解决方案**：[说明此服务端功能如何解决上述问题]

## 3. API接口设计

### 3.1 核心API端点
- [列出核心API端点，每个端点包含：]
  - **路径**：GET/POST/PUT/DELETE /api/[路径]
  - **功能描述**：[详细描述API功能]
  - **请求参数**：[请求参数格式和验证规则]
  - **响应格式**：[标准响应格式]
  - **错误处理**：[可能的错误码和处理方式]

### 3.2 认证和授权
- **认证方式**：[JWT、OAuth、API Key等]
- **权限控制**：[角色权限矩阵]
- **安全验证**：[请求验证规则]

### 3.3 数据验证
- **输入验证**：[请求数据验证规则]
- **业务规则验证**：[业务逻辑验证]
- **数据格式标准**：[统一的数据格式要求]

## 4. 数据库设计

### 4.1 数据模型
- **主要实体**：[核心数据实体定义]
- **实体关系**：[实体间的关系设计]
- **数据字段**：[关键字段定义和约束]

### 4.2 数据库性能
- **索引设计**：[必要索引策略]
- **查询优化**：[预期的查询模式和优化]
- **数据分片**：[大数据量的分片策略]

### 4.3 数据一致性
- **事务处理**：[事务边界和ACID要求]
- **并发控制**：[锁机制和并发策略]
- **数据同步**：[多服务间的数据同步]

## 5. 业务逻辑实现

### 5.1 核心业务流程
1. [业务流程步骤1：详细描述]
2. [业务流程步骤2：详细描述]
3. [业务流程步骤3：详细描述]

### 5.2 异常处理策略
- **系统异常**：[系统级异常处理]
- **业务异常**：[业务逻辑异常处理]
- **外部服务异常**：[第三方服务异常处理]

### 5.3 业务规则
- **验证规则**：[业务数据验证规则]
- **计算规则**：[业务计算逻辑]
- **状态转换**：[业务状态机设计]

## 6. 技术要求

### 6.1 性能要求
- **响应时间**：[API响应时间要求，如 < 200ms]
- **吞吐量**：[并发请求处理能力，如 1000 req/s]
- **数据容量**：[数据存储和处理容量要求]

### 6.2 可扩展性要求
- **横向扩展**：[服务实例扩展能力]
- **负载均衡**：[负载分布策略]
- **缓存策略**：[数据缓存设计]

### 6.3 安全要求
- **数据加密**：[传输和存储加密要求]
- **访问控制**：[API访问控制策略]
- **审计日志**：[操作审计和日志记录]
- **合规要求**：[相关法规和标准要求]

## 7. 外部依赖

### 7.1 第三方服务
- **服务名称**：[依赖的外部服务]
- **集成方式**：[API调用、SDK等]
- **降级策略**：[服务不可用时的处理]

### 7.2 数据库依赖
- **数据库类型**：[MySQL、PostgreSQL、MongoDB等]
- **版本要求**：[数据库版本要求]
- **连接池配置**：[数据库连接管理]

### 7.3 基础设施
- **服务器要求**：[CPU、内存、存储要求]
- **网络要求**：[带宽、延迟要求]
- **监控需求**：[服务监控和告警]

## 8. 测试策略

### 8.1 单元测试
- **覆盖率要求**：[代码覆盖率目标，如 80%+]
- **核心测试点**：[重要业务逻辑测试]
- **Mock策略**：[外部依赖Mock方案]

### 8.2 集成测试
- **API测试**：[接口功能和性能测试]
- **数据库测试**：[数据操作和一致性测试]
- **服务间测试**：[微服务间集成测试]

### 8.3 压力测试
- **负载测试**：[正常负载下的性能测试]
- **压力测试**：[极限负载下的稳定性测试]
- **容错测试**：[故障场景下的恢复能力测试]

## 9. 部署和运维

### 9.1 部署要求
- **容器化**：[Docker镜像和配置]
- **环境配置**：[开发、测试、生产环境配置]
- **配置管理**：[环境变量和配置文件管理]

### 9.2 监控和日志
- **性能监控**：[关键指标监控]
- **错误监控**：[异常和错误跟踪]
- **业务监控**：[业务指标监控]
- **日志策略**：[日志级别和归档策略]

### 9.3 维护和更新
- **版本管理**：[API版本策略]
- **数据迁移**：[数据库schema变更策略]
- **回滚策略**：[部署失败回滚方案]

## 10. 验收标准

### 10.1 功能验收
- [ ] [核心API功能测试通过]
- [ ] [业务逻辑验证正确]
- [ ] [数据操作正常]

### 10.2 性能验收
- [ ] [响应时间达标]
- [ ] [并发处理能力达标]
- [ ] [资源使用合理]

### 10.3 安全验收
- [ ] [安全测试通过]
- [ ] [权限控制正确]
- [ ] [数据保护合规]

---

## 服务端PRD创建指导

当帮助用户创建服务端PRD时，请特别注意：

1. **API设计优先**：明确定义所有API接口的输入输出
2. **数据模型清晰**：详细设计数据库结构和关系
3. **性能考虑**：明确性能指标和优化策略
4. **安全为重**：充分考虑安全性和权限控制
5. **可扩展性**：设计支持未来扩展的架构

## 输出要求

- 将完成的服务端PRD保存为markdown文件
- 文件名格式：`server-prd-[功能名称].md`
- 建议保存在项目的 `server/knowledge/features/doing/` 目录下
- 确保文档包含足够的技术细节供后端开发者使用